%# -*- coding: utf-8-unix -*-
%%==================================================
%% chapter01.tex for SJTU Master Thesis
%%==================================================

%\bibliographystyle{sjtu2}%[此处用于每章都生产参考文献]
\chapter{绪论}
\label{chap:intro}

\section{研究背景与意义}

\subsection{研究背景}
\label{sec:backgrounds}

大规模分布式存储系统是是云计算与大数据的基石，是近年来的研究热点。随着近年来云计算与大数据的兴起，现有的存储设备正面临着诸多挑战。首先，随着数据量的爆发式增长，对存储系统的容量提出了更高的要求，如何在提供大容量存储的前提下尽可能降低成本是一大挑战\cite{gray2003next}。其次，由于云计算中的多台虚拟机可能会依赖于同一存储系统，这就导致该存储系统的负载整体会表现为随机化与碎片化，这就要求存储系统具有良好的随机读写性能。最后，至今计算性能可谓日益提高，相比最初已有了巨大的提升，但存储设备的读写性能提高仍然有限，这就导致计算性能与存储性能之间的差距越来越巨大\cite{morris2003evolution}，如何能提供与计算性能相匹配的存储设备的读写性能也是另一大挑战。

根本上来看，存储系统所基于的存储设备极大地决定了存储系统的性能。目前，磁盘（HDD:Hard Disk Drive）仍然是存储系统中最广泛使用的存储设备，虽然随着各种硬件技术的发展，磁盘的容量依然依照摩尔定律\cite{schirle1996history}在过去的30多年中增长了近十万倍，但是由于其磁头是机械移动这一根本性的限制，磁盘的访问延迟在过去的30年中仅提高了约2倍，而如果通过提高转速来进一步提高磁盘的访问性能，过高的转速会引发能耗与散热等诸多问题，因此磁盘的容量与访问性能之间的鸿沟十分巨大。

近年来，SSD（Solid State Disk，也被称为固态盘）被越来越广泛地使用，这一新型存储设备的兴起为实现更高性能的存储系统提供了新的研究方向。与磁盘不同，SSD是电子器件，不像磁盘需要磁头的机械移动，因此SSD的随机读写性能要远胜于磁盘，另外由于没有磁头的机械移动，SSD相比磁盘的能耗更低，另外也更具抗震性。然而SSD仍有诸多问题。首先，虽然SSD相比磁盘在随机读写上性能要优秀得多，然而在顺序读写上性能相比磁盘并没有明显的优势。其次，SSD的成本相比磁盘仍要高出许多。最后，SSD的读写性能并不对称，这是由于SSD的写操作造成的，SSD对数据进行更新时需要首先将新数据写入空闲页面，然后将原页面标记为invalid，之后等待将原页面擦除后再将新数据写入原页面，最终导致SSD的写操作耗时约为读操作的6倍，并且由于SSD的擦除操作具有约五万次的次数限制，超出次数后的页面将无法使用，因此会带来耐久性问题。虽然SSD有上述几个问题，但SSD的优缺点与磁盘的优缺点可以很好地互补，因此将SSD与磁盘结合使用为在保证低成本的前提下尽可能提高容量与提升性能提供了新的可能。

\subsection{研究意义}

目前在学术界与产业界，混合存储系统的研究越发受到重视，各方面的研究都有在开展。但是目前混合存储系统领域的研究仍有些问题尚待解决，主要体现在以下两个方面：

一方面，总的来看，学术界目前对于混合存储系统的研究，很多重点并不在于混合存储系统的设计与实现，而主要在关注SSD的物理结构与特性，关于基于SSD与HDD的混合存储系统的文献\cite{guerra2011cost, kim2011hybridstore, 杨濮源2012一种时间敏感的, 陈震37基于磁盘和固态硬盘的混合存储系统研究综述}能公开搜索到的很少。另外在少数提出的基于SSD与HDD的混合存储系统的文献中，真正进行了测试验证的文献更少，更多的是仅仅提供一种思路，无法验证其正确性。而产业界中已经有一些存储设备厂商生产出了使用基于SSD与HDD的混合存储设计的存储产品，但这些存储设备的内部实现由于厂商并未公开相应资料因而无从知晓，性能的提升仅能依赖于一些简单的测试而并不能得知各项具体的性能提升数值。

另一方面，由于SSD具有写前擦除与擦除次数限制的特性，导致在混合存储系统中如果将对数据的写操作都放到SSD上进行，那么对于SSD的寿命势必会产生影响，但如果将对数据的写操作放到磁盘上进行，那么系统整体的写性能必然会下降到磁盘水平，因此对于写操作的处理不能单纯地都放到SSD上或都放到磁盘上，如何将写操作分发到SSD和磁盘上既能保证SSD的寿命尽可能长又能保证系统整体的写操作性能，仍是目前混合存储系统设计中的问题。

因此，把握住SSD这一新型存储器件兴起所带来的机遇，开展将SSD作为缓存的混合存储系统的研究，一方面是对存储系统基础理论的创新，另一方面也对提升我国存储领域的核心竞争力具有重大意义。更进一步，也是为当下以及未来，我国云计算与大数据的发展打下坚实的存储基础。

\section{研究内容与目标}

本文将通过学习存储相关理论，并结合现有的混合存储系统实例分析，研究混合存储系统中的关键技术，在此基础上设计实现以SSD作为磁盘缓存的SSD缓存系统，对其进行测试、完善和优化，并与其它软件进行比较测试。

本文主要将包括以下四大目标：
\begin{enumerate}[leftmargin=0pt, itemindent=39pt]
    \item 现有主流存储设备的随机读写性能、顺序读写性能、容量、成本的对比分析。
    \item 现有混合存储系统的随机读写性能、顺序读写性能、可靠性、额外开销的对比分析。
    \item 混合存储系统设计中关键技术的研究。
    \item 设计并实现基于SSD与HDD的SSD缓存系统qscache系统。
\end{enumerate}

\section{论文结构}

论文正文主要分为以下七个章节： 

第一章：绪论。本章节首先介绍了本论文的研究背景与研究意义，然后介绍了本论文的研究内容与目标，最后对本论文整个的结构进行了介绍。

第二章：混合存储系统的介绍及混合存储系统设计中关键技术的研究。本章节首先介绍了混合存储系统的基本概念，然后对当前主流的存储设备的特性进行了介绍及对比分析，之后对几种不同的混合存储系统模式进行了介绍。最后对混合存储系统设计中的关键技术分别展开介绍。

第三章：开源混合存储系统分析。本章节对于目前主流的三个开源的混合存储框架进行了介绍，并对他们的特性以及性能进行了对比分析。

第四章：qscache系统设计。本章节首先介绍了qscache系统的设计动机与设计目标，然后对qscache系统整个设计进行了阐述。 

第五章：qscache系统实现。首先对于系统的底层结构进行了分析，然后对系统的具体实现进行了详细的阐述。 

第六章：qscache系统测试。首先介绍了系统测试的目的与方法，然后对于qscache系统的性能与功能分别进行测试，最后对测试结果进行了分析。 

第七章：总结与展望。对论文所做的工作进行了总结，然后提出将来可能的改进工作和改进方向。

